<?xml version="1.0" encoding="UTF-8"?>


<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">


<mapper namespace="com.filmee.myapp.mapper.BoardMapper">

    <select id="getList" resultType="com.filmee.myapp.domain.BoardVO">
      <![CDATA[ 
        SELECT /*+index_desc(fm_board)*/*
        FROM fm_board
        OFFSET (#{currPage}-1) * #{amount} ROW
        FETCH NEXT #{amount} ROWS ONLY
      ]]>
    </select>

    <select id="select" resultType="com.filmee.myapp.domain.BoardVO">
      <![CDATA[ 
        SELECT *
        FROM fm_board
        WHERE bno=#{bno}
      ]]>
    </select>

    <insert id="insertSelectKey">
      <selectKey keyProperty="bno" order="BEFORE" resultType="int">
        SELECT ISEQ$$_101436.nextval FROM dual
      </selectKey>
      <![CDATA[ 
        INSERT INTO fm_board(writer, title, content)
        VALUES(#{writer},#{title}, #{content})
      ]]>
    </insert>

    <update id="update">
      <![CDATA[ 
        UPDATE fm_board
        SET title=#{title}, CONTENT=#{content}, update_ts=sysdate
        WHERE bno=#{bno}
      ]]>
    </update>

    <delete id="delete">
      <![CDATA[ 
        DELETE FROM fm_board
        WHERE bno=#{bno}
      ]]>
    </delete>

    <select id="getTotalCount" resultType="int">
      SELECT count(bno)
      FROM fm_board
      WHERE bno>0
    </select>

</mapper>